<div class="capa">
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data" class="login-form" >
    <h2 class="form-heading">Publica un nuevo Evento</h2>

    <div class="form-campo">
      <label for="eventName">Nombre del evento:</label>
      <input id="eventName" formControlName="eventName" />
      <div *ngIf="myForm.controls['eventName'].touched && myForm.controls['eventName'].invalid" class="error">
        <small *ngIf="myForm.controls['eventName'].errors?.['required']">El nombre es obligatorio.</small>
        <small *ngIf="myForm.controls['eventName'].errors?.['minlength']">Mínimo 3 caracteres.</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="date">Fecha:</label>
      <input id="date" type="date" formControlName="date" />
      <div *ngIf="myForm.controls['date'].touched && myForm.controls['date'].invalid" class="error">
        <small>La fecha es obligatoria.</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="city">Ciudad:</label>
      <select id="city" formControlName="city">
        <option value="" disabled>Seleccione una ciudad</option>
        <option *ngFor="let c of cities()" [value]="c._id">{{ c.name }}</option>
      </select>
      <div *ngIf="myForm.controls['city'].touched && myForm.controls['city'].invalid" class="error">
        <small>Debe seleccionar una ciudad.</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="areaInteres">Área de interés:</label>
      <select id="areaInteres" formControlName="areaInteres">
        <option value="" disabled>Seleccione un área de interés</option>
        <option *ngFor="let a of areas()" [value]="a._id">{{ a.name }}</option>
      </select>
      <div *ngIf="myForm.controls['areaInteres'].touched && myForm.controls['areaInteres'].invalid" class="error">
        <small>Debe seleccionar un área de interés.</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="category">Categoría:</label>
      <select id="category" formControlName="category">
        <option value="" disabled>Seleccione una categoria</option>
        <option *ngFor="let a of categories" [value]="a">{{ a }}</option>
      </select>
      <div *ngIf="myForm.controls['category'].touched && myForm.controls['category'].invalid" class="error">
        <small>Debe seleccionar una categoría.</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="maxCapacity">Capacidad máxima:</label>
      <input id="maxCapacity" type="number" formControlName="maxCapacity" min="1" />
      <div *ngIf="myForm.controls['maxCapacity'].touched && myForm.controls['maxCapacity'].invalid" class="error">
        <small>Debe ingresar una capacidad válida (mínimo 1).</small>
      </div>
    </div>

    <div class="form-campo">
      <label for="image">Imagen del evento:</label>
      <input id="image" type="file" (change)="onFileSelected($event)" accept="image/*" />
    </div>

    <button type="submit">Publicar Evento</button>
  </form>
</div>

<!-- Debug -->
<!-- <pre>{{ myForm.value | json }}</pre> -->